{% extends 'base.html' %}

{% block content %}
<div class="container">
    <h1>Welcome, {{ user.username }}</h1>
    <p>Manage your cars and add new ones to the catalog.</p>

    <!-- User's Cars -->
    <div class="car-list">
        <h2>Your Cars</h2>
        {% if cars %}
            <div class="car-grid">
                {% for car in cars %}
                <div class="car-card">
                    <img src="{{ car.images.first.image.url }}" alt="{{ car.model }}" class="car-image">
                    <h3>{{ car.brand }} {{ car.model }}</h3>
                    <p><strong>Price:</strong> ${{ car.price }}</p>
                    <p><strong>Year:</strong> {{ car.year }}</p>
                    <p><strong>Mileage:</strong> {{ car.mileage }} km</p>
                    <a href="{% url 'car_detail' car.pk %}" class="doc-link">View Details</a>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <p>You haven't added any cars yet.</p>
        {% endif %}
    </div>

    <!-- Add Car Form -->
    <div class="form-container">
        <h2>Add a New Car</h2>
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            {{ form.as_p }}
                <label for="id_image">Upload Images:</label>
                <input type="file" name="image" id="id_image" multiple required>     
            <button type="submit" class="login_btn">Add Car</button>
        </form>
    </div>
</div>
{% endblock %}